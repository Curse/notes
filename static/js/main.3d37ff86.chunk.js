(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"SET_NOTE",function(){return k}),t.d(r,"START_SYNC",function(){return w}),t.d(r,"STOP_SYNC",function(){return E});var a={};t.r(a),t.d(a,"black",function(){return _e}),t.d(a,"primary",function(){return De}),t.d(a,"primaryLight",function(){return Ne}),t.d(a,"primaryDark",function(){return Pe});var c=t(17),o=t(22),u=t(0),i=t.n(u),s=t(27),l=t(7),p=t(32),f=t(20),d=t(9),b=t(44),m=t(26),v=t(21),h=Object(v.a)(),g="auth:SET_USER",O={user:null};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case g:return Object(m.a)({},e,{user:n.payload.user});default:return e}},x=t(40),k="notes:SET_NOTE",w="notes:START_SYNC",E="notes:STOP_SYNC",y=t(41),S=t.n(y),I={home:"This is a simple note taking app.\n\n    Prepend any world with @ to create a new page, like @this.\n\n    The entire page is editable, apart from the Home link at the top.",this:"Isn't this easy?"};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case k:return function(e,n){var t=n.id,r=n.label,a=n.content;return Object(m.a)({},e,Object(x.a)({},S()(r),{id:t,content:a}))}(e,n.payload);default:return e}};var C=t(16),R=t.n(C),A=t(18),L=t(67),_=t(25),D=t.n(_),N=t(34),P=Object(N.a)([function(e){return e.auth}],function(e){return e.user}),U=function(e){var n=e.label,t=e.content,r=e.id,a=void 0===r?null:r,c=e.persist;return{type:k,payload:{id:a,label:n,content:t,persist:void 0===c||c}}},B=R.a.mark(J),K=R.a.mark(W),F=R.a.mark(M),H=R.a.mark(Q),Y=R.a.mark(V),z=[].concat(Object(L.a)(Object.values(r)),[g]);function J(e){var n;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=D.a.firestore(),t.abrupt("return",Object(b.b)(function(t){var r=n.collection("notes").where("owner","==",e.uid).onSnapshot(function(e){e.docChanges().forEach(function(e){return t({id:e.doc.id,data:e.doc.data()})})});return function(){r.off()}}));case 2:case"end":return t.stop()}},B)}function W(){var e,n,t,r,a;return R.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(A.f)(P);case 2:if(e=c.sent){c.next=5;break}return c.abrupt("return");case 5:return c.next=7,Object(A.b)(J,e);case 7:n=c.sent;case 8:return c.prev=9,c.next=12,Object(A.h)(n);case 12:return t=c.sent,r=t.id,a=t.data,c.next=17,Object(A.e)(U(Object(m.a)({id:r},a,{persist:!1})));case 17:c.next=22;break;case 19:c.prev=19,c.t0=c.catch(9),console.log("firebase error",c.t0);case 22:c.next=8;break;case 24:case"end":return c.stop()}},K,null,[[9,19]])}function M(e){var n,t,r,a,c;return R.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.id,t=e.label,r=e.content,o.next=3,Object(A.f)(P);case 3:if(a=o.sent){o.next=6;break}return o.abrupt("return");case 6:if(c=D.a.firestore(),n){o.next=12;break}return o.next=10,c.collection("notes").add({owner:a.uid,label:t,content:r});case 10:o.next=13;break;case 12:c.collection("notes").doc(n).get().then(function(e){e.ref.update({label:t,content:r})});case 13:case"end":return o.stop()}},F)}function Q(e){var n,t,r;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=e.type,t=e.payload,a.t0=n,a.next=a.t0===g?4:a.t0===k?12:16;break;case 4:return a.next=6,Object(A.d)(W);case 6:return r=a.sent,a.next=9,Object(A.h)(E);case 9:return a.next=11,Object(A.c)(r);case 11:return a.abrupt("break",16);case 12:if(!t.persist){a.next=15;break}return a.next=15,Object(A.b)(M,t);case 15:return a.abrupt("break",16);case 16:case"end":return a.stop()}},H)}function V(){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.i)(z,Q);case 2:case"end":return e.stop()}},Y)}var q=R.a.mark(G);function G(){var e;return R.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=[V],n.next=3,Object(A.a)(e.map(function(e){return Object(A.g)(R.a.mark(function n(){return R.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=1,n.next=4,Object(A.b)(e);case 4:return n.abrupt("break",12);case 7:n.prev=7,n.t0=n.catch(1),console.log(n.t0);case 10:n.next=0;break;case 12:case"end":return n.stop()}},n,null,[[1,7]])}))}));case 3:case"end":return n.stop()}},q)}var X=Object(b.a)();var Z=t(61),$=t.n(Z),ee=t(15);function ne(){var e=Object(c.a)(["\n  width: 100%;\n  max-width: 400px;\n  margin-left: 10px;\n  margin-right: 10px;\n  background-color: white;\n  border-radius: 4px;\n  padding: 10px;\n"]);return ne=function(){return e},e}function te(){var e=Object(c.a)(["\n  width: 100%;\n  min-height: 100vh;\n  background-color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return te=function(){return e},e}var re={signInFlow:"popup",signInOptions:[D.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},ae=ee.c.div(te(),function(e){return e.theme.primaryDark}),ce=ee.c.div(ne());var oe=function(e){return i.a.createElement(ae,null,i.a.createElement(ce,null,i.a.createElement("h1",null,"Notes App"),i.a.createElement("p",null,"Please sign-in:"),i.a.createElement($.a,{uiConfig:re,firebaseAuth:D.a.auth()})))},ue=Object(o.c)(function(e){return{user:P(e)}})(function(e){var n=e.user,t=e.children;return n?t:i.a.createElement(oe,null)}),ie=t(52),se=t(65),le=function(e){return e.notes},pe=Object(N.a)([le],function(e){return Object.keys(e).sort()}),fe=Object(N.a)([pe],function(e){var n={home:"/"},t=Object.keys(n);return e.map(function(e){return t.includes(e)?{label:e,path:n[e]}:{label:e,path:"/p/".concat(e,"/")}})}),de=t(4);function be(){var e=Object(c.a)(["\n    position: relative;\n    width: 100%;\n    height: 24px;\n\n    .react-autosuggest__container {\n        background-color: red;\n        position: relative;\n    }\n"]);return be=function(){return e},e}var me=ee.c.div(be()),ve={menu:function(e){return Object(m.a)({},e,{marginTop:0})}},he=Object(o.c)(function(e){return{labels:pe(e),paths:fe(e)}},function(e){return Object(f.b)({navigate:function(e){return Object(de.d)(e)}},e)})(function(e){var n=e.paths,t=e.navigate,r=i.a.useRef(null),a=n.map(function(e){return{value:e.path,label:"@".concat(e.label)}});return i.a.useEffect(function(){var e=function(e){e.shiftKey&&e.ctrlKey&&"F"===e.key&&r.current.focus()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[]),i.a.createElement(me,null,i.a.createElement(se.a,{ref:r,value:"",onChange:function(e){return t(e.value)},options:a,className:"bbbababb",placeholder:"Jump to a note stub",styles:ve}))});function ge(){var e=Object(c.a)(["\n    width: 30px;\n    height: 30px;\n    margin-right: 10px;\n    border-radius: 50%;\n"]);return ge=function(){return e},e}function Oe(){var e=Object(c.a)(["\n    display: flex;\n    align-items: center;\n    border-radius: 3px;\n    border: none;\n    cursor: pointer;\n    margin-left: 4px;\n    padding: 4px;\n    transition: color 80ms, background-color 80ms;\n    color: ",";\n    background-color: ","; \n\n    &:hover,\n    &:focus,\n    &:active {\n        color: white;\n        background-color: ",";        \n    }\n"]);return Oe=function(){return e},e}function je(){var e=Object(c.a)(["\n    width: 100%;\n    display: flex;\n    padding: 5px;\n    flex-direction: row;\n"]);return je=function(){return e},e}var xe=ee.c.div(je()),ke=ee.c.button(Oe(),function(e){return e.theme.black},function(e){var n=e.theme;return Object(ie.a)(n.primary,0)},function(e){var n=e.theme;return Object(ie.a)(n.primary,1)}),we=ee.c.img(ge()),Ee=Object(o.c)(function(e){return{user:P(e)}})(function(e){var n=e.user;return i.a.createElement(xe,null,i.a.createElement(he,null),i.a.createElement(ke,{onClick:function(){return D.a.auth().signOut()}},i.a.createElement(we,{src:n.photoURL}),i.a.createElement("div",null,"Logout")))}),ye=t(66),Se=t(48),Ie=function(e){return e.text.split(/(@\w+)/).map(function(e,n){return e.startsWith("@")?i.a.createElement(Se.a,{contentEditable:!1,to:"/notes/p/"+e.slice(1),onFocus:function(e){return e.stopPropagation()},key:n},e):e})};function Te(){var e=Object(c.a)(["\n    outline: none;\n    display: inline-block;\n    width: 100%;\n    white-space: pre-wrap;\n    word-break: break-word;\n    caret-color: rgba(0,0,0,0/9);\n    padding: 3px 2px;\n    min-height: 1em;\n    color: rgba(0,0,0,0.9);\n"]);return Te=function(){return e},e}function Ce(){var e=Object(c.a)(["\n    outline: none;\n    width: 100%;\n"]);return Ce=function(){return e},e}var Re=ee.c.div(Ce()),Ae=ee.c.div(Te()),Le=Object(o.c)(function(e,n){var t;return{note:(t=n.name,Object(N.a)([le],function(e){return e[S()(t)]}))(e)}},function(e,n){return Object(f.b)({setContent:function(e,t){return U({label:n.name,id:e,content:t})}},e)})(function(e){var n=e.name,t=e.note,r=e.setContent,a=t||{},c=a.id,o=void 0===c?null:c,u=a.content,s=void 0===u?"Type here...":u,l=i.a.useState(!1),p=Object(ye.a)(l,2),f=p[0],d=p[1],b=i.a.useRef(null),m=i.a.useRef(null),v=function(){b.current.focus()};i.a.useEffect(function(){if(f){var e=function(e){e.target!==m.current&&v()};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}},[f]);var h=function(){var e=m.current.innerText;d(!1),e!==s&&r(o,e)};return i.a.createElement(Re,{ref:b,tabIndex:0},i.a.createElement(Ae,{id:n,ref:m,contentEditable:!0,onFocus:function(e){return d(!0)},onBlur:function(e){h()},onKeyDown:function(e){return"Escape"===e.key?(d(!1),v(),!1):e.ctrlKey&&"Enter"===e.key?(h(),v(),!1):void 0},onKeyUp:function(){return console.log(m.current.innerHTML)},suppressContentEditableWarning:!0},f?s:i.a.createElement(Ie,{text:s})))}),_e="#212121",De="#1976d2",Ne="#63a4ff",Pe="#004ba0";t(111);function Ue(){var e=Object(c.a)(['\n  font-family: "Lato", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica,\n    "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";\n']);return Ue=function(){return e},e}function Be(){var e=Object(c.a)(['\n  @import url("https://fonts.googleapis.com/css?family=Lato&display=swap");\n\n  * {\n    box-sizing: border-box;\n  }\n']);return Be=function(){return e},e}var Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=[X,Object(d.a)(n)],r=[f.a.apply(void 0,t)],a=f.d,c=Object(f.e)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(f.c)(Object(m.a)({router:Object(p.b)(h),auth:j,notes:T},e))}(),e,a.apply(void 0,r));return X.run(G),c}({},h);D.a.initializeApp({apiKey:"AIzaSyBR2o33lqBdQsoHD4X1uppI93k2fVDeQsw",authDomain:"curse-notes.firebaseapp.com",databaseURL:"https://curse-notes.firebaseio.com",projectId:"curse-notes",storageBucket:"curse-notes.appspot.com",messagingSenderId:"715608577655",appId:"1:715608577655:web:b80968c875c4d3a1601872"}),D.a.auth().onAuthStateChanged(function(e){return Ke.dispatch(function(e){return{type:g,payload:{user:e}}}(e))});var Fe=Object(ee.b)(Be()),He=ee.c.div(Ue()),Ye=function(e){e.match;return i.a.createElement(Le,{name:"home"})},ze=function(e){var n=e.match;return i.a.createElement(Le,{name:n.params.pageId})},Je=document.getElementById("root");Object(s.render)(i.a.createElement(function(){return i.a.createElement(ee.a,{theme:a},i.a.createElement(o.a,{store:Ke},i.a.createElement(He,null,i.a.createElement(Fe,null),i.a.createElement(ue,null,i.a.createElement(Ee,null),i.a.createElement(p.a,{history:h},i.a.createElement(l.a,{exact:!0,path:"/notes/",component:Ye}),i.a.createElement(l.a,{path:"/notes/p/:pageId",component:ze}))))))},null),Je)},69:function(e,n,t){e.exports=t(113)}},[[69,2,1]]]);
//# sourceMappingURL=main.3d37ff86.chunk.js.map