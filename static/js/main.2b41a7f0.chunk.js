(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,n,t){e.exports=t(267)},267:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"SET_NOTE",function(){return y}),t.d(r,"START_SYNC",function(){return k}),t.d(r,"STOP_SYNC",function(){return E});var a={};t.r(a),t.d(a,"black",function(){return Ue}),t.d(a,"primary",function(){return Ke}),t.d(a,"primaryLight",function(){return ze}),t.d(a,"primaryDark",function(){return Fe});var c=t(14),o=t(23),i=t(0),u=t.n(i),s=t(19),l=t(21),p=t(40),d=t(20),f=t(78),b=t(60),h=t(28),m=t(22),v=Object(m.a)(),g="auth:SET_USER",O={user:null};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case g:return Object(h.a)({},e,{user:n.payload.user});default:return e}},x=t(55),y="notes:SET_NOTE",k="notes:START_SYNC",E="notes:STOP_SYNC",w=t(56),S=t.n(w),I={home:"This is a simple note taking app.\n\n    Prepend any world with @ to create a new page, like @this.\n\n    The entire page is editable, apart from the Home link at the top.",this:"Isn't this easy?"};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case y:return function(e,n){var t=n.id,r=n.label,a=n.content;return Object(h.a)({},e,Object(x.a)({},S()(r),{id:t,content:a}))}(e,n.payload);default:return e}};var T=t(15),R=t.n(T),A=t(17),L=t(59),N=t(26),_=t.n(N),D=t(37),P=Object(D.a)([function(e){return e.auth}],function(e){return e.user}),B=function(e){var n=e.label,t=e.content,r=e.id,a=void 0===r?null:r,c=e.persist;return{type:y,payload:{id:a,label:n,content:t,persist:void 0===c||c}}},U=R.a.mark(J),K=R.a.mark(W),z=R.a.mark(Q),F=R.a.mark(V),H=R.a.mark(q),Y=[].concat(Object(L.a)(Object.values(r)),[g]);function J(e){var n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.a.firestore(),e.abrupt("return",Object(b.b)(function(e){var t=n.collection("notes").onSnapshot(function(n){n.docChanges().forEach(function(n){return e({id:n.doc.id,data:n.doc.data()})})});return function(){t.off()}}));case 2:case"end":return e.stop()}},U)}function W(){var e,n,t,r,a;return R.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(A.f)(P);case 2:if(e=c.sent){c.next=5;break}return c.abrupt("return");case 5:return c.next=7,Object(A.b)(J,e);case 7:n=c.sent;case 8:return c.prev=9,c.next=12,Object(A.h)(n);case 12:return t=c.sent,r=t.id,a=t.data,c.next=17,Object(A.e)(B(Object(h.a)({id:r},a,{persist:!1})));case 17:c.next=22;break;case 19:c.prev=19,c.t0=c.catch(9),console.log("firebase error",c.t0);case 22:c.next=8;break;case 24:case"end":return c.stop()}},K,null,[[9,19]])}function Q(e){var n,t,r,a,c;return R.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.id,t=e.label,r=e.content,o.next=3,Object(A.f)(P);case 3:if(a=o.sent){o.next=6;break}return o.abrupt("return");case 6:if(c=_.a.firestore(),n){o.next=12;break}return o.next=10,c.collection("notes").add({owner:a.uid,label:t,content:r});case 10:o.next=13;break;case 12:c.collection("notes").doc(n).get().then(function(e){e.ref.update({label:t,content:r})});case 13:case"end":return o.stop()}},z)}function V(e){var n,t,r;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=e.type,t=e.payload,a.t0=n,a.next=a.t0===g?4:a.t0===y?12:16;break;case 4:return a.next=6,Object(A.d)(W);case 6:return r=a.sent,a.next=9,Object(A.h)(E);case 9:return a.next=11,Object(A.c)(r);case 11:return a.abrupt("break",16);case 12:if(!t.persist){a.next=15;break}return a.next=15,Object(A.b)(Q,t);case 15:return a.abrupt("break",16);case 16:case"end":return a.stop()}},F)}function q(){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.i)(Y,V);case 2:case"end":return e.stop()}},H)}var G=R.a.mark(M);function M(){var e;return R.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=[q],n.next=3,Object(A.a)(e.map(function(e){return Object(A.g)(R.a.mark(function n(){return R.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=1,n.next=4,Object(A.b)(e);case 4:return n.abrupt("break",12);case 7:n.prev=7,n.t0=n.catch(1),console.log(n.t0);case 10:n.next=0;break;case 12:case"end":return n.stop()}},n,null,[[1,7]])}))}));case 3:case"end":return n.stop()}},G)}var X=Object(b.a)();var Z=t(125),$=t.n(Z),ee=t(12);function ne(){var e=Object(c.a)(["\n  width: 100%;\n  max-width: 400px;\n  margin-left: 10px;\n  margin-right: 10px;\n  background-color: white;\n  border-radius: 4px;\n  padding: 10px;\n"]);return ne=function(){return e},e}function te(){var e=Object(c.a)(["\n  width: 100%;\n  min-height: 100vh;\n  background-color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return te=function(){return e},e}var re={signInFlow:"popup",signInOptions:[_.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},ae=ee.c.div(te(),function(e){return e.theme.primaryDark}),ce=ee.c.div(ne());var oe=function(e){return u.a.createElement(ae,null,u.a.createElement(ce,null,u.a.createElement("h1",null,"Notes App"),u.a.createElement("p",null,"Please sign-in:"),u.a.createElement($.a,{uiConfig:re,firebaseAuth:_.a.auth()})))},ie=Object(o.c)(function(e){return{user:P(e)}})(function(e){var n=e.user,t=e.children;return n?t:u.a.createElement(oe,null)}),ue=t(88),se=t(130),le=function(e){return e.notes},pe=Object(D.a)([le],function(e){return Object.keys(e).sort()}),de=Object(D.a)([le],function(e){return Object.keys(e).reduce(function(n,t){return[].concat(Object(L.a)(n),[{id:e[t].id,display:t}])},[])}),fe=Object(D.a)([pe],function(e){var n={home:"/notes/"},t=Object.keys(n);return e.map(function(e){return t.includes(e)?{label:e,path:n[e]}:{label:e,path:"/notes/p/".concat(e,"/")}})}),be=t(1);function he(){var e=Object(c.a)(["\n    position: relative;\n    width: 100%;\n    height: 24px;\n\n    .react-autosuggest__container {\n        background-color: red;\n        position: relative;\n    }\n"]);return he=function(){return e},e}var me=ee.c.div(he()),ve={menu:function(e){return Object(h.a)({},e,{marginTop:0})}},ge=Object(o.c)(function(e){return{labels:pe(e),paths:fe(e)}},function(e){return Object(d.b)({navigate:function(e){return Object(be.d)(e)}},e)})(function(e){var n=e.paths,t=e.navigate,r=u.a.useRef(null),a=n.map(function(e){return{value:e.path,label:"@".concat(e.label)}});return u.a.useEffect(function(){var e=function(e){e.shiftKey&&e.ctrlKey&&"F"===e.key&&r.current.focus()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[]),u.a.createElement(me,null,u.a.createElement(se.a,{ref:r,value:"",onChange:function(e){return t(e.value)},options:a,className:"bbbababb",placeholder:"Jump to a note stub",styles:ve}))});function Oe(){var e=Object(c.a)(["\n    width: 30px;\n    height: 30px;\n    margin-right: 10px;\n    border-radius: 50%;\n"]);return Oe=function(){return e},e}function je(){var e=Object(c.a)(["\n    display: flex;\n    align-items: center;\n    border-radius: 3px;\n    border: none;\n    cursor: pointer;\n    margin-left: 4px;\n    padding: 4px;\n    transition: color 80ms, background-color 80ms;\n    color: ",";\n    background-color: ","; \n\n    &:hover,\n    &:focus,\n    &:active {\n        color: white;\n        background-color: ",";        \n    }\n"]);return je=function(){return e},e}function xe(){var e=Object(c.a)(["\n    width: 100%;\n    display: flex;\n    padding: 5px;\n    flex-direction: row;\n"]);return xe=function(){return e},e}var ye=ee.c.div(xe()),ke=ee.c.button(je(),function(e){return e.theme.black},function(e){var n=e.theme;return Object(ue.a)(n.primary,0)},function(e){var n=e.theme;return Object(ue.a)(n.primary,1)}),Ee=ee.c.img(Oe()),we=Object(o.c)(function(e){return{user:P(e)}})(function(e){var n=e.user;return u.a.createElement(ye,null,u.a.createElement(ge,null),u.a.createElement(ke,{onClick:function(){return _.a.auth().signOut()}},u.a.createElement(Ee,{src:n.photoURL}),u.a.createElement("div",null,"Logout")))}),Se=t(89),Ie=t(80),Ce=function(e){var n=e.text,t=/@\[?(\w+)]?/;return n.split(/(@\[?\w+]?\(?\w+\)?)/).map(function(e,n){return e.startsWith("@")&&(e="@".concat(e.match(t)[1])),e.startsWith("@")?u.a.createElement(Ie.a,{contentEditable:!1,to:"/notes/p/"+e.slice(1),onFocus:function(e){return e.stopPropagation()},key:n},e):e})},Te=t(87),Re={control:{},highlighter:{overflow:"hidden"},input:{margin:0},"&singleLine":{control:{display:"inline-block",width:130},highlighter:{padding:1,border:"2px inset transparent"},input:{padding:1,border:"2px inset"}},"&multiLine":{control:{},highlighter:{padding:9},input:{padding:0,minHeight:63,outline:0,border:0}},suggestions:{list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14},item:{padding:"5px 15px",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#cee4e5"}}}};function Ae(){var e=Object(c.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  pointer-events: none;\n  \n  a {\n    pointer-events: all;\n  }\n"]);return Ae=function(){return e},e}function Le(){var e=Object(c.a)(["\n  position:absolute;\n  top: 0;\n  right: 0;\n  opacity: 0.5;\n  &:hover,\n  &:focus {\n    opacity: 1;\n  }\n"]);return Le=function(){return e},e}function Ne(){var e=Object(c.a)(["\n    outline: none;\n    position:relative;\n    width: 100%;\n    \n    .editor {\n      opacity: 0;\n    }\n    .editing .editor{\n      opacity: 1;\n    }\n"]);return Ne=function(){return e},e}var _e=ee.c.div(Ne()),De=ee.c.button(Le()),Pe=ee.c.div(Ae()),Be=Object(o.c)(function(e,n){var t;return{note:(t=n.name,Object(D.a)([le],function(e){return e[S()(t)]}))(e),suggestions:de(e)}},function(e,n){return Object(d.b)({setContent:function(e,t){return B({label:n.name,id:e,content:t})}},e)})(function(e){e.name;var n=e.note,t=e.suggestions,r=e.setContent,a=n||{},c=a.id,o=void 0===c?null:c,i=a.content,s=void 0===i?"Type here...":i,l=u.a.useState(!1),p=Object(Se.a)(l,2),d=p[0],f=p[1],b=u.a.useState(s),h=Object(Se.a)(b,2),m=h[0],v=h[1],g=u.a.useRef(null);u.a.useEffect(function(){v(s)},[s]);var O=function(){var e=m;f(!1),e!==s&&r(o,e)};return u.a.createElement(_e,{tabIndex:0,className:d?"editing":""},u.a.createElement(Te.b,{key:"editable-content",value:m,onChange:function(e){return v(e.target.value)},style:Re,onKeyDown:function(e){return"Escape"===e.key?(f(!1),!1):e.ctrlKey&&"Enter"===e.key?(O(),!1):void 0},onClick:function(e){f(!0)},inputRef:g,className:"editor"},u.a.createElement(Te.a,{trigger:"@",data:t,displayTransform:function(e,n){return"@".concat(n)}})),!d&&u.a.createElement(Pe,null,u.a.createElement("div",{contentEditable:!0},u.a.createElement(Ce,{text:s}))),d&&u.a.createElement(De,{onClick:function(){return O()}},"Save"))}),Ue="#212121",Ke="#1976d2",ze="#63a4ff",Fe="#004ba0";t(265);function He(){var e=Object(c.a)(['\n  font-family: "Lato", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica,\n    "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";\n']);return He=function(){return e},e}function Ye(){var e=Object(c.a)(['\n  @import url("https://fonts.googleapis.com/css?family=Lato&display=swap");\n\n  * {\n    box-sizing: border-box;\n  }\n']);return Ye=function(){return e},e}var Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=[X,Object(f.a)(n)],r=[d.a.apply(void 0,t)],a=d.d,c=Object(d.e)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.c)(Object(h.a)({router:Object(p.b)(v),auth:j,notes:C},e))}(),e,a.apply(void 0,r));return X.run(M),c}({},v);_.a.initializeApp({apiKey:"AIzaSyBR2o33lqBdQsoHD4X1uppI93k2fVDeQsw",authDomain:"curse-notes.firebaseapp.com",databaseURL:"https://curse-notes.firebaseio.com",projectId:"curse-notes",storageBucket:"curse-notes.appspot.com",messagingSenderId:"715608577655",appId:"1:715608577655:web:b80968c875c4d3a1601872"}),_.a.auth().onAuthStateChanged(function(e){return Je.dispatch(function(e){return{type:g,payload:{user:e}}}(e))});var We=Object(ee.b)(Ye()),Qe=ee.c.div(He()),Ve=function(e){e.match;return u.a.createElement(Be,{name:"home"})},qe=function(e){var n=e.match;return u.a.createElement(Be,{name:n.params.pageId})},Ge=document.getElementById("root");Object(s.render)(u.a.createElement(function(){return u.a.createElement(ee.a,{theme:a},u.a.createElement(o.a,{store:Je},u.a.createElement(Qe,null,u.a.createElement(We,null),u.a.createElement(ie,null,u.a.createElement(we,null),u.a.createElement(p.a,{history:v},u.a.createElement(l.a,{exact:!0,path:"/notes/",component:Ve}),u.a.createElement(l.a,{path:"/notes/p/:pageId",component:qe}))))))},null),Ge)}},[[132,2,1]]]);
//# sourceMappingURL=main.2b41a7f0.chunk.js.map