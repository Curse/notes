{"version":3,"sources":["utils/history.tsx","auth/action-types.tsx","auth/reducer.js","notes/action-types.tsx","notes/reducer.tsx","user-status/action-types.tsx","user-status/reducer.tsx","auth/selectors.tsx","notes/actions.tsx","notes/saga.tsx","user-status/actions.tsx","user-status/saga.tsx","config/root-saga.tsx","config/configure-store.tsx","auth/Login.tsx","auth/ForceAuth.tsx","notes/selectors.tsx","notes/note-search.tsx","user-bar/user-bar.tsx","editable-div/simple-render.tsx","editable-div/defaultStyles.js","editable-div/editable-div.tsx","editable-div/index.tsx","config/theme.tsx","user-status/selectors.tsx","user-status/user-badge.tsx","user-status/user-status.tsx","index.tsx","config/root-reducer.tsx","auth/actions.tsx"],"names":["history","createBrowserHistory","basename","SET_USER","initialState","user","authReducer","state","arguments","length","undefined","action","type","types","Object","objectSpread","payload","SET_NOTE","START_SYNC","STOP_SYNC","home","this","notesReducer","_ref","id","label","content","defineProperty","snakeCase","handleSetNote","SET_STATUS","REMOVE_STATUS","userStatusReducer","_ref$user","userId","location","avatar","displayName","handleSetUserStatus","_ref2","keys","reduce","acc","handleRemoveUserStatus","getUser","createSelector","auth","setNote","_ref$id","_ref$persist","persist","createFirebaseChannel","listenForNotes","persistNote","sagaFilter","notesSaga","concat","toConsumableArray","values","notesTypes","authTypes","database","regenerator_default","a","wrap","_context","prev","next","firebase","firestore","abrupt","eventChannel","emiter","listener","collection","onSnapshot","snapshot","docChanges","forEach","change","doc","data","off","stop","_marked","firebaseChannel","_context2","select","authSelectors","sent","call","take","put","actions","t0","console","log","_marked2","_context3","add","owner","uid","get","then","docSnapshot","ref","update","_marked3","_ref3","currentSync","_context4","fork","cancel","_marked4","_context5","takeEvery","_marked5","setUserStatus","removeUserStatus","listenForStatusChanges","persistOwnStatus","userStatusSaga","userStatusTypes","LOCATION_CHANGE","where","saga_marked","t1","saga_marked2","existingSnapshot","existingId","getLocation","photoURL","status","pathname","saga_marked4","saga_marked5","_context6","_marked6","rootSaga","sagas","all","map","saga","spawn","mark","_callee","root_saga_marked","sagaMiddleware","createSagaMiddleware","uiConfig","signInFlow","signInOptions","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","Wrap","styled","div","_templateObject","theme","primaryDark","LoginWindow","_templateObject2","Login","props","react_default","createElement","StyledFirebaseAuth_default","firebaseAuth","connect","selectors","children","auth_Login","getState","notes","getLabels","sort","getSuggestableNotes","noteLabel","display","getPaths","labels","specificPaths","process","specificLabels","includes","path","note_search_templateObject","customStyles","menu","provided","marginTop","notesSelectors","paths","dispatch","bindActionCreators","navigate","push","createNoteFromTerm","search","React","useRef","options","value","_React$useState","useState","_React$useState2","slicedToArray","searchInput","setSearchInput","useEffect","callback","evt","shiftKey","ctrlKey","key","current","focus","document","addEventListener","removeEventListener","note_search_Wrap","react_select_browser_esm","inputValue","onChange","option","placeholder","styles","noOptionsMessage","onKeyDown","term","target","find","preventDefault","blur","onInputChange","e","TopBar","user_bar_templateObject","button","user_bar_templateObject2","black","rgba","primary","img","_templateObject3","userSelectors","_ref4","note_search","SimpleRender","text","labelRegex","split","i","startsWith","match","react_router_dom","contentEditable","to","slice","onFocus","stopPropagation","defaultStyles","control","highlighter","overflow","input","margin","&singleLine","width","padding","border","&multiLine","minHeight","outline","suggestions","list","backgroundColor","fontSize","item","borderBottom","&focused","editable_div_templateObject","ContentWrap","editable_div_templateObject2","SaveButton","editable_div_templateObject3","RenderedContent","_templateObject4","NoteLabel","h2","_templateObject5","EditableDiv","ownProps","note","name","setContent","_ref2$id","_ref2$content","editing","setEditing","_React$useState3","_React$useState4","contentState","setContentState","editableDiv","persistEdit","newContent","editable_div_Wrap","className","react_mentions_esm","style","onClick","inputRef","trigger","displayTransform","suppressContentEditableWarning","simple_render","primaryLight","highlight","userStatus","getUserIds","users","Outer","user_badge_templateObject","samePage","Label","user_badge_templateObject2","_ref5","user_badge_templateObject3","Avatar","user_badge_templateObject4","currentLocation","_ref6","replace","title","user_badge_Wrap","user_badge_Avatar","src","user_status_templateObject","StyledBadge","UserBadge","user_status_templateObject2","userIds","userStatusSelectors","user_status_Wrap","store","middlewares","routerMiddleware","enhancers","applyMiddleware","apply","composeEnhancers","compose","createStore","injectedReducers","combineReducers","router","connectRouter","createReducer","run","configureStore","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","onAuthStateChanged","setUser","GlobalStyle","createGlobalStyle","src_templateObject","src_templateObject2","NotesBar","src_templateObject3","StyledUserStatus","UserStatus","src_templateObject4","NotesHeader","src_templateObject5","NoteContainer","_templateObject6","Home","src_editable_div","Page","params","pageId","rootElement","getElementById","render","open","setOpen","styled_components_browser_esm","es","esm","src_Wrap","auth_ForceAuth","index_es","icon","faAngleDoubleDown","faAngleDoubleUp","user_bar","react_router","exact","component"],"mappings":"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","file":"static/js/main.0e938e96.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory({basename: '/notes'});\nexport default history;","export const SET_USER = 'auth:SET_USER'","import * as types from './action-types'\n\nconst initialState = {\n    user: null\n}\n\nfunction authReducer(state = initialState, action) {\n    switch (action.type) {\n        case types.SET_USER: {\n            return {\n                ...state,\n                user: action.payload.user,\n            }\n        }\n        default: {\n            return state\n        }\n    }\n}\n\nexport default authReducer","export const SET_NOTE = 'notes:SET_NOTE'\nexport const START_SYNC = 'notes:START_SYNC'\nexport const STOP_SYNC = 'notes:STOP_SYNC'","import * as types from './action-types'\nimport snakeCase from 'lodash/snakeCase'\n\nconst initialState = {\n    home: `This is a simple note taking app.\n\n    Prepend any world with @ to create a new page, like @this.\n\n    The entire page is editable, apart from the Home link at the top.`,\n    this: `Isn't this easy?`\n};\n\nfunction handleSetNote(state, {id, label, content}) {\n    return {\n        ...state,\n        [snakeCase(label)]: {id, content},\n    }\n}\n\n\nfunction notesReducer(state = initialState, action) {\n    switch (action.type) {\n        case (types.SET_NOTE): {\n            return handleSetNote(state, action.payload)\n        }\n        default: {\n            return state;\n        }\n    }\n}\n\n  export default notesReducer","export const SET_STATUS = 'USER_STATUS:SET_STATUS'\nexport const REMOVE_STATUS = 'USER_STATUS:REMOVE_STATUS'","import * as types from './action-types'\n\nconst initialState = {\n};\n\nfunction handleSetUserStatus(state, {user: {id, userId, location, avatar, displayName}}) {\n    return {\n        ...state,\n        [userId]: {userId, location, avatar, displayName},\n    }\n}\n\nfunction handleRemoveUserStatus(state, { id }) {\n    return Object.keys(state).reduce((acc, userId) => {\n        if (userId !== id) {\n            acc[userId] = state[userId]\n        }\n        return acc\n    }, {})\n}\n\n\nfunction userStatusReducer(state = initialState, action) {\n    switch (action.type) {\n        case (types.SET_STATUS): {\n            return handleSetUserStatus(state, action.payload)\n        }\n        case (types.REMOVE_STATUS): {\n            return handleRemoveUserStatus(state, action.payload)\n        }\n        default: {\n            return state;\n        }\n    }\n}\n\n  export default userStatusReducer","import { createSelector } from 'reselect'\n\nexport const getState = state => state.auth\nexport const getUser = createSelector([getState], (state) => state.user )\n","import * as types from './action-types'\n\nexport const setNote = ({label, content, id=null, persist=true}) => ({\n    type: types.SET_NOTE,\n    payload: {\n        id, label, content, persist\n    }\n})","import {eventChannel} from 'redux-saga'\nimport {take, put, call, select, takeEvery, fork, cancel} from 'redux-saga/effects'\nimport firebase from 'firebase'\nimport * as authSelectors from '../auth/selectors'\nimport * as notesTypes from './action-types'\nimport * as authTypes from '../auth/action-types'\nimport * as actions from './actions'\n\nconst types = [...Object.values(notesTypes), authTypes.SET_USER]\n\nfunction* createFirebaseChannel(user) {\n    const database = firebase.firestore()\n\n    return eventChannel(emiter => {\n        const listener = database.collection(\"notes\").onSnapshot(snapshot => {\n          snapshot.docChanges().forEach(change => emiter({id: change.doc.id, data: change.doc.data()}))\n        })\n  \n        return () => {\n          //@ts-ignore\n          listener.off();\n        }\n    })\n}\n\nfunction* listenForNotes() {\n    const user = yield select(authSelectors.getUser)\n    if (!user) {\n        return\n    }\n    const firebaseChannel = yield call(createFirebaseChannel, user) \n\n    while (true) {\n        try {\n            const { id, data } = yield take(firebaseChannel);\n            yield put(actions.setNote({id, ...data, persist: false}));\n        } catch(err) {\n            console.log('firebase error', err)\n        }\n    }\n}\n\nfunction* persistNote({id, label, content}) {\n    const user = yield select(authSelectors.getUser)\n    if (!user) {\n        return\n    }\n    const database = firebase.firestore()\n    if (!id) {\n        yield database.collection(\"notes\").add({\n            owner: user.uid,\n            label,\n            content,\n        })\n    } else {\n        database.collection('notes').doc(id).get().then(docSnapshot => {\n            docSnapshot.ref.update({label, content})\n        })\n    }\n    \n}\n\nfunction* sagaFilter({type, payload}) {\n    switch (type) {\n        case authTypes.SET_USER:\n            const currentSync = yield fork(listenForNotes)\n            yield take(notesTypes.STOP_SYNC)\n            yield cancel(currentSync)\n            break\n        case notesTypes.SET_NOTE:\n            if (payload.persist) {\n                yield call(persistNote, payload)\n            }\n            break\n    }\n  }\n  \n\nexport default function* notesSaga() {\n    yield takeEvery(types, sagaFilter)\n}","import * as types from './action-types'\n\nexport const setUserStatus = (user, persist) => ({\n    type: types.SET_STATUS,\n    payload: {\n        user,\n        persist\n    }\n})\n\n\nexport const removeUserStatus = (userId) => ({\n    type: types.REMOVE_STATUS,\n    payload: {\n        userId,\n    }\n})","import {eventChannel} from 'redux-saga'\nimport {take, put, call, select, takeEvery, fork, cancel} from 'redux-saga/effects'\nimport firebase from 'firebase'\nimport * as authSelectors from '../auth/selectors'\nimport * as userStatusTypes from './action-types'\nimport * as authTypes from '../auth/action-types'\nimport * as actions from './actions'\nimport {LOCATION_CHANGE, getLocation} from 'connected-react-router'\nconst types = [...Object.values(userStatusTypes), authTypes.SET_USER, LOCATION_CHANGE]\n\nfunction* createFirebaseChannel(user) {\n    const database = firebase.firestore()\n\n    return eventChannel(emiter => {\n        const listener = database.collection(\"user-status\").where('status', '==', 'active').onSnapshot(snapshot => {\n          snapshot.docChanges().forEach(change => {\n              emiter({id: change.doc.id, data: change.doc.data(), action: change.type})\n          })\n        })\n\n        return () => {\n          //@ts-ignore\n          listener.off();\n        }\n    })\n}\n\nfunction* listenForStatusChanges() {\n    const user = yield select(authSelectors.getUser)\n    if (!user) {\n        return\n    }\n    const firebaseChannel = yield call(createFirebaseChannel, user)\n\n    while (true) {\n        try {\n            const { id, data, action } = yield take(firebaseChannel);\n            switch (action) {\n                case 'remove':\n                    yield put(actions.removeUserStatus(id));\n                default:\n                    if (data.userId !== user.uid) {\n                        yield put(actions.setUserStatus({id, ...data},false));\n                    }\n            }\n        } catch(err) {\n            console.log('firebase error', err)\n        }\n    }\n}\n\nfunction* persistNote({id, label, content}) {\n    const user = yield select(authSelectors.getUser)\n    if (!user) {\n        return\n    }\n    const database = firebase.firestore()\n    if (!id) {\n        yield database.collection(\"notes\").add({\n            owner: user.uid,\n            label,\n            content,\n        })\n    } else {\n        database.collection('notes').doc(id).get().then(docSnapshot => {\n            docSnapshot.ref.update({label, content})\n        })\n    }\n\n}\n\nfunction* persistOwnStatus() {\n    const user = yield select(authSelectors.getUser)\n    const location = yield select(getLocation)\n    const database = firebase.firestore()\n    if (!user) {\n        return\n    }\n    const existingSnapshot = yield database.collection(\"user-status\")\n        .where('userId', '==', user.uid).get()\n\n    let existingId = null\n    existingSnapshot.forEach((doc) => existingId=doc.id)\n\n    if (!existingId) {\n        yield database.collection(\"user-status\").add({\n            userId: user.uid,\n            avatar: user.photoURL,\n            displayName: user.displayName,\n            status: 'active',\n            location: location.pathname,\n        })\n    } else {\n        database.collection('user-status').doc(existingId).get().then(docSnapshot => {\n            docSnapshot.ref.update({status: 'active', location: location.pathname})\n        })\n    }\n}\n\nfunction* sagaFilter({type, payload}) {\n    switch (type) {\n        case authTypes.SET_USER:\n            const currentSync = yield fork(listenForStatusChanges)\n            break\n        case LOCATION_CHANGE:\n            yield fork(persistOwnStatus)\n            break\n    }\n}\n\n\nexport default function* userStatusSaga() {\n    yield takeEvery(types, sagaFilter)\n}","import {spawn, call, all} from 'redux-saga/effects'\nimport notesSaga from '../notes/saga'\nimport userStatusSaga from '../user-status/saga'\n\nexport default function* rootSaga () {\n    const sagas = [\n        notesSaga,\n        userStatusSaga,\n    ];\n  \n    yield all(sagas.map(saga =>\n      spawn(function* () {\n        while (true) {\n          try {\n            yield call(saga)\n            break\n          } catch (e) {\n            console.log(e)\n          }\n        }\n      }))\n    );\n  }","/**\n * Create the store with dynamic reducers\n */\n\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { routerMiddleware } from 'connected-react-router';\nimport createSagaMiddleware from 'redux-saga';\nimport createReducer from './root-reducer';\nimport rootSaga from './root-saga'\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport default function configureStore(initialState = {}, history) {\n  // Create the store with two middlewares\n  // 2. routerMiddleware: Syncs the location/URL path to the state\n  const middlewares = [sagaMiddleware, routerMiddleware(history)];\n\n  const enhancers = [applyMiddleware(...middlewares)];\n\n  // If Redux DevTools Extension is installed use it, otherwise use Redux compose\n  /* eslint-disable no-underscore-dangle */\n  // @ts-ignore\n  const composeEnhancers = process.env.NODE_ENV !== 'production' && typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    // @ts-ignore\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({ \n      // TODO Try to remove when `react-router-redux` is out of beta, LOCATION_CHANGE should not be fired more than once after hot reloading\n      // Prevent recomputing reducers for `replaceReducer`\n      shouldHotReload: false\n    })\n    : compose;\n  /* eslint-enable */\n\n  const store = createStore(createReducer(), initialState, composeEnhancers(...enhancers));\n  sagaMiddleware.run(rootSaga)\n\n  // Extensions\n  // @ts-ignore\n  // store.injectedReducers = {}; // Reducer registry\n  // store.injectedSagas = {}; // Saga registry\n\n  // /* istanbul ignore next */\n  // if (module.hot) {\n  //   module.hot.accept('./reducers', () => {\n  //     store.replaceReducer(createReducer(store.injectedReducers));\n  //     store.dispatch({ type: '@@REDUCER_INJECTED' });\n  //   });\n  // }\n\n  return store;\n}","import React from \"react\";\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport firebase from 'firebase';\nimport styled from 'styled-components'\n\n// Configure FirebaseUI.\nexport const uiConfig = {\n  // Popup signin flow rather than redirect flow.\n  signInFlow: 'popup',\n  // Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\n  // signInSuccessUrl: '/signedIn',\n  // We will display Google and Facebook as auth providers.\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n    // firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n    // firebase.auth.TwitterAuthProvider.PROVIDER_ID,\n    // firebase.auth.GithubAuthProvider.PROVIDER_ID,\n  ],\n  callbacks: {\n    signInSuccessWithAuthResult: () => false\n  }\n};\n\nconst Wrap = styled.div`\n  width: 100%;\n  min-height: 100vh;\n  background-color: ${({theme})=> theme.primaryDark};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst LoginWindow = styled.div`\n  width: 100%;\n  max-width: 400px;\n  margin-left: 10px;\n  margin-right: 10px;\n  background-color: white;\n  border-radius: 4px;\n  padding: 10px;\n`\n\nexport function Login(props: any) {\n  return (\n  <Wrap>\n    <LoginWindow>\n      <h1>Notes App</h1>\n      <p>Please sign-in:</p>\n      <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n    </LoginWindow>\n  </Wrap>);\n}\n\nexport default Login","import React from 'react'\nimport {connect} from 'react-redux'\nimport Login from './Login'\nimport * as selectors from './selectors'\n\nconst ForceAuth = ({user, children}) => {\n    if (user) {\n        return children\n    }\n    return <Login/>\n}\n\nconst mapStateToProps = (state) => ({\n    user: selectors.getUser(state)\n})\n\nexport default connect(mapStateToProps)(ForceAuth)","import {createSelector} from 'reselect'\nimport snakeCase from 'lodash/snakeCase'\n\nexport const getState = state => state.notes\n\nexport const getLabels = createSelector([getState], state => Object.keys(state).sort())\n\nexport const getSuggestableNotes = createSelector([getState], state => {\n    return Object.keys(state).reduce((acc, noteLabel) => {\n        return [...acc, {\n            id: state[noteLabel].id,\n            display: noteLabel\n        }]\n    }, [])\n})\n\nexport const getPaths = createSelector([getLabels], labels => {\n    const specificPaths = {'home': `${process.env.PUBLIC_URL}/`}\n    const specificLabels = Object.keys(specificPaths)\n    return labels.map(label => {\n        if (specificLabels.includes(label)) {\n            return {label: label, path: specificPaths[label]}\n        }\n        return {label: label, path: `${process.env.PUBLIC_URL}/p/${label}/`}\n    })\n})\n\nexport const makeGetNoteByLabel = label => {\n    return createSelector([getState], (state) => state[snakeCase(label)])\n}","import React from 'react'\nimport Select from 'react-select'\nimport {connect} from 'react-redux'\nimport {bindActionCreators} from 'redux'\nimport * as notesSelectors from './selectors'\nimport styled from 'styled-components'\nimport { push } from 'connected-react-router'\nimport { setNote } from \"./actions\";\n\nconst Wrap = styled.div`\n    position: relative;\n    width: 100%;\n\n    .react-autosuggest__container {\n        background-color: red;\n        position: relative;\n    }\n`\n\nconst customStyles = {\n    menu: (provided) => ({\n        ...provided,\n        marginTop: 0,\n    })\n}\n\n\nconst NoteSearch = ({paths, navigate, createNoteFromTerm}) => {\n    const search = React.useRef(null)\n    const options = paths.map(path => ({value: path.path, label: `@${path.label}`}))\n    const [searchInput, setSearchInput] = React.useState('')\n\n    React.useEffect(() => {\n        const callback = (evt) => {\n            if (evt.shiftKey && evt.ctrlKey && evt.key === 'F') {\n                search.current.focus()\n            }\n        }\n        document.addEventListener('keydown', callback)\n        return () => {\n          document.removeEventListener('keydown', callback)\n        }\n      }, [paths])\n\n    const keyDownHandler = (evt) => {\n        if (evt.key === 'Enter') {\n            // determine if the input value is an existing entity\n            const term = evt.target.value\n            const path = paths.find(function(path) {\n                return path.label.includes(term)\n            })\n\n            // if this entity does not match anything, create it\n            if (path === undefined) {\n                evt.preventDefault()\n                createNoteFromTerm(term)\n                navigate(`${process.env.PUBLIC_URL}/p/${term}/`)\n                setSearchInput('')\n                evt.target.blur()\n            }\n        }\n    }\n\n    return (\n        <Wrap>\n            <Select\n                ref={search}\n                inputValue={searchInput}\n                onChange={(option) => navigate(option.value)}\n                options={options}\n                placeholder=\"Jump to a note stub\"\n                styles={customStyles}\n                noOptionsMessage={({inputValue})=>`Press [Enter] to create \"${inputValue}\"`}\n                onKeyDown={keyDownHandler}\n                onInputChange={(e)=>{\n                    console.log(e); setSearchInput(e)}}\n            />\n        </Wrap>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    labels: notesSelectors.getLabels(state),\n    paths: notesSelectors.getPaths(state),\n})\n\nconst mapDispatchToProps = (dispatch) => bindActionCreators({\n    navigate: (label) => push(label),\n    createNoteFromTerm: (label) => setNote({\n        label,\n        content: '',\n        persist: true\n    })\n}, dispatch)\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NoteSearch)","import React from 'react'\nimport { connect } from \"react-redux\";\nimport * as userSelectors from '../auth/selectors'\nimport firebase from 'firebase'\nimport styled from 'styled-components'\nimport {rgba} from 'polished'\nimport NoteSearch from '../notes/note-search'\n\nconst TopBar = styled.div`\n    width: 100%;\n    display: flex;\n    padding: 5px;\n    flex-direction: row;\n`\n\nconst LogoutButton = styled.button`\n    display: flex;\n    align-items: center;\n    border-radius: 3px;\n    border: none;\n    cursor: pointer;\n    margin-left: 4px;\n    padding: 4px;\n    transition: color 80ms, background-color 80ms;\n    color: ${({theme}) => theme.black};\n    background-color: ${({theme}) => rgba(theme.primary, 0)}; \n\n    &:hover,\n    &:focus,\n    &:active {\n        color: white;\n        background-color: ${({theme}) => rgba(theme.primary, 1)};        \n    }\n`\n\nconst Avatar = styled.img`\n    width: 30px;\n    height: 30px;\n    margin-right: 10px;\n    border-radius: 50%;\n`\n\n\nconst UserBar = ({user}) => (\n    <TopBar>\n        <NoteSearch/>\n        {/* <LogoutButton onClick={() => firebase.auth().signOut()}>\n            <Avatar src={user.photoURL}/>\n            <div>Logout</div>\n        </LogoutButton> */}\n    </TopBar>\n)\n\nconst mapStateToProps = (state) => ({\n    user: userSelectors.getUser(state)\n})\n\nexport default connect(mapStateToProps)(UserBar)","\nimport React from 'react'\nimport {Link} from 'react-router-dom'\n\nconst SimpleRender = ({text}) => {\n    const labelRegex = /@\\[?(\\w+)]?/\n    const components = text.split(/(@\\[?\\w+]?\\(?\\w+\\)?)/).map((a: string, i: number) => {\n        if (a.startsWith(\"@\")) {\n            a = `@${a.match(labelRegex)[1]}`\n        }\n        return a.startsWith(\"@\") ? (\n        // @ts-ignore\n        <Link\n            contentEditable={false}\n            to={`${process.env.PUBLIC_URL}/p/` + a.slice(1)}\n            onFocus={e => e.stopPropagation()}\n            key={i}\n        >\n            {a}\n        </Link>\n        ) : (\n        a\n        )\n    }\n    );\n    return components;\n};\n\nexport default SimpleRender","export default {\n  control: {\n    // backgroundColor: '#fff',\n\n    // fontSize: 14,\n    // fontWeight: 'normal',\n  },\n\n  highlighter: {\n    overflow: 'hidden',\n  },\n\n  input: {\n    margin: 0,\n  },\n\n  '&singleLine': {\n    control: {\n      display: 'inline-block',\n\n      width: 130,\n    },\n\n    highlighter: {\n      padding: 1,\n      border: '2px inset transparent',\n    },\n\n    input: {\n      padding: 1,\n\n      border: '2px inset',\n    },\n  },\n\n  '&multiLine': {\n    control: {\n      // fontFamily: 'monospace',\n      // border: '1px solid silver',\n    },\n\n    highlighter: {\n      padding: 9,\n    },\n\n    input: {\n      padding: 0,\n      minHeight: 63,\n      outline: 0,\n      border: 0,\n    },\n  },\n\n  suggestions: {\n    list: {\n      backgroundColor: 'white',\n      border: '1px solid rgba(0,0,0,0.15)',\n      fontSize: 14,\n    },\n\n    item: {\n      padding: '5px 15px',\n      borderBottom: '1px solid rgba(0,0,0,0.15)',\n\n      '&focused': {\n        backgroundColor: '#cee4e5',\n      },\n    },\n  },\n}","import React from 'react'\nimport {bindActionCreators} from 'redux'\nimport {connect} from 'react-redux'\nimport {getSuggestableNotes, makeGetNoteByLabel} from '../notes/selectors'\nimport {setNote} from '../notes/actions'\nimport SimpleRender from './simple-render'\nimport styled from 'styled-components'\nimport { MentionsInput, Mention } from 'react-mentions'\nimport defaultStyles from './defaultStyles'\n\ninterface EditingStyleChangeFunction {\n    editing: boolean\n}\n\nconst Wrap = styled.div`\n    padding: 0 5px;\n    \n    .editor {\n      opacity: 0;\n    }\n    &.editing .editor{\n      opacity: 1;\n    }\n`\n\nconst ContentWrap = styled.div`\n    outline: none;\n    position: relative;\n    width: 100%;\n    font-size: 14px;\n    width: 100%;\n`\n\nconst SaveButton = styled.button`\n  position:absolute;\n  top: 0;\n  right: 0;\n  opacity: 0.5;\n  &:hover,\n  &:focus {\n    opacity: 1;\n  }\n`\n\nconst RenderedContent = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  pointer-events: none;\n  white-space: pre;\n  a {\n    pointer-events: all;\n  }\n`\n\nconst NoteLabel = styled.h2`\n    margin: 10px 0 0 0;\n    font-family: 'Roboto Condensed', sans-serif;\n    font-size: 16px;\n    font-weight: 700;\n`\n\nconst defaultContent = \"Type here...\"\n\n\nconst EditableDiv = ({\n    name,\n    note,\n    suggestions,\n    setContent,\n}) => {\n    const {\n        id = null,\n        content = defaultContent,\n    } = note || {}\n    const [editing, setEditing] = React.useState(false)\n    const [contentState, setContentState] = React.useState(content)\n    const editableDiv = React.useRef(null)\n\n\n    const resetFocus = () => {\n        // noteStart.current.focus()\n    }\n\n    React.useEffect(()=>{\n        setContentState(content)\n    },[content])\n\n    const persistEdit = () => {\n        const newContent = contentState\n        setEditing(false)\n        if (newContent !== content) {\n            setContent(id, newContent)\n        }\n    }\n\n    const handleKeyDown = e => {\n        if (e.key === 'Escape') {\n            setEditing(false)\n            resetFocus()\n            return false\n        }\n        if (e.ctrlKey && e.key === 'Enter') {\n            persistEdit()\n            resetFocus()\n            return false\n        }\n    }\n\n    const handleEditStart = e => {\n        setEditing(true)\n    }\n\n    return (\n        <Wrap className={editing ? 'editing': ''}>\n            <NoteLabel>{name}</NoteLabel>\n            <ContentWrap>\n                <MentionsInput\n                    key={'editable-content'}\n                    value={contentState}\n                    onChange={(e)=>setContentState(e.target.value)}\n                    style={defaultStyles}\n                    onKeyDown={handleKeyDown}\n                    onClick={handleEditStart}\n                    inputRef={editableDiv}\n                    className={'editor'}\n                >\n                  <Mention\n                    trigger=\"@\"\n                    data={suggestions}\n                    displayTransform={(id, display) => `@${display}`}\n                  />\n                </MentionsInput>\n                {!editing && <RenderedContent>\n                    <div\n                        contentEditable\n                        suppressContentEditableWarning={true}\n                        >\n                        <SimpleRender text={content}/>\n                    </div>\n                </RenderedContent>}\n                {editing && <SaveButton onClick={()=>persistEdit()}>Save</SaveButton>}\n            </ContentWrap>\n        </Wrap>\n    );\n};\n\nconst mapStateToProps = (state, ownProps) => {\n    const getContentByLabel = makeGetNoteByLabel(ownProps.name)\n    return {\n        note: getContentByLabel(state),\n        suggestions: getSuggestableNotes(state),\n    }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => bindActionCreators({\n    setContent: (id, content) => setNote({label: ownProps.name, id, content}),\n}, dispatch)\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditableDiv)","import EditableDiv from './editable-div'\n\nexport default EditableDiv","export const black = '#212121'\nexport const primary = \"#1976d2\"\nexport const primaryLight = \"#63a4ff\"\nexport const primaryDark = \"#004ba0\"\nexport const highlight = \"#b59e54\"","import {createSelector} from 'reselect'\n\nexport const getState = state => state.userStatus\n\nexport const getUserIds = createSelector([getState], (users) => Object.keys(users))\n\nexport const makeGetUserById = (userId) => createSelector([getState], (users) => users[userId])","import React from \"react\"\nimport { connect } from \"react-redux\";\nimport * as userStatusSelectors from \"../user-status/selectors\"\nimport styled from \"styled-components\";\nimport {Link} from \"react-router-dom\";\nimport {getLocation} from 'connected-react-router'\n\ninterface withSameFlag {\n    samePage: boolean\n}\n\nconst Outer = styled.div<withSameFlag>`\n  opacity: ${({samePage}) => samePage ? 1 : 0.7};\n  transition: opacity 100ms;\n  order: ${({samePage}) => samePage ? -1 : 1};\n  &:hover {\n    opacity: 1;\n  }\n`\n\nconst Label = styled.div`\n  opacity: 0;\n  font-size: 12px;\n  padding: 5px;\n  transition: translate 100ms, opacity 100ms;\n  position:absolute;\n  bottom: calc(100% + 4px);\n  left: 50%;\n  background-color: white;\n  border: 3px solid ${({theme})=>theme.highlight}\n  transform: translate(-50%, 0);\n  pointer-events: none;\n  color: ${({theme})=>theme.black};\n  text-decoration:none;\n  &::before {\n    content: '';\n    position: absolute;\n    left: 50%;\n    top: 100%;\n    width: 5px;\n    height: 5px;\n    background-color: #fff;\n    border: 3px solid ${({theme})=>theme.highlight};\n    border-left: none;\n    border-top: none;\n    transform: translate(-50%, -2px) rotate(45deg);\n  }\n`\n\nconst Wrap = styled.div`\n  display: flex;\n  align-items: center;\n  position: relative;\n  \n  &:hover ${Label}{ \n        opacity: 1;\n  }\n`\n\nconst Avatar = styled.img`\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  overflow: hidden;\n`\n\nconst UserBadge = ({className, user, currentLocation}) => {\n    const samePage = user.location === currentLocation.pathname\n    const label = user.location.replace(/^\\/p\\//, '').replace(/\\/$/, '')\n    return (\n    <Outer className={className} title={user.displayName} samePage={samePage}>\n        <Link to={`${process.env.PUBLIC_URL}${user.location}`}>\n            <Wrap>\n                <Label className='label'>\n                    {label}\n                </Label>\n                <Avatar src={user.avatar}/>\n            </Wrap>\n        </Link>\n    </Outer>\n)}\n\nconst mapStateToProps = (state, ownProps) => {\n    const getUserById = userStatusSelectors.makeGetUserById(ownProps.userId)\n    return {\n        user: getUserById(state),\n        currentLocation: getLocation(state),\n    }\n}\n\nexport default connect(mapStateToProps)(UserBadge)","import React from \"react\"\nimport { connect } from \"react-redux\";\nimport * as userStatusSelectors from \"../user-status/selectors\"\nimport UserBadge from './user-badge'\nimport styled from \"styled-components\";\n\nconst Wrap = styled.div`\n  display: flex;\n  padding: 3px;\n`\n\nconst StyledBadge = styled(UserBadge)`\n  width: 20px;\n  margin-right: 3px;\n`\n\nconst UserStatus = ({className, userIds}) => (\n    <Wrap className={className}>\n        {userIds.map(user => <StyledBadge userId={user} key={user} />)}\n    </Wrap>\n)\n\nconst mapStateToProps = (state) => ({\n    userIds: userStatusSelectors.getUserIds(state)\n})\n\nexport default connect(mapStateToProps)(UserStatus)","import { Provider } from 'react-redux'\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { render } from \"react-dom\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport { ConnectedRouter } from 'connected-react-router'\nimport configureStore from './config/configure-store'\nimport history from './utils/history'\nimport firebase from 'firebase';\nimport * as _ from \"lodash\";\nimport { Login } from \"./auth/Login\";\nimport { setUser } from './auth/actions'\nimport ForceAuth from './auth/ForceAuth'\nimport UserBar from './user-bar/user-bar'\nimport styled, {ThemeProvider} from 'styled-components'\nimport EditableDiv from './editable-div'\nimport * as theme from './config/theme'\nimport { createGlobalStyle } from \"styled-components\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDoubleUp } from '@fortawesome/free-solid-svg-icons/faAngleDoubleUp'\nimport { faAngleDoubleDown } from '@fortawesome/free-solid-svg-icons/faAngleDoubleDown'\nimport UserStatus from './user-status/user-status'\n\nimport \"normalize.css\";\n\nconst store = configureStore({}, history)\n\n// Configure Firebase.\nvar firebaseConfig = {\n    apiKey: \"AIzaSyBR2o33lqBdQsoHD4X1uppI93k2fVDeQsw\",\n    authDomain: \"curse-notes.firebaseapp.com\",\n    databaseURL: \"https://curse-notes.firebaseio.com\",\n    projectId: \"curse-notes\",\n    storageBucket: \"curse-notes.appspot.com\",\n    messagingSenderId: \"715608577655\",\n    appId: \"1:715608577655:web:b80968c875c4d3a1601872\"\n  };\nfirebase.initializeApp(firebaseConfig);\nfirebase.auth().onAuthStateChanged( user => store.dispatch(setUser(user)))\n\n\nconst GlobalStyle = createGlobalStyle`\n  @import url(\"https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed&display=swap\");\n\n  * {\n    box-sizing: border-box;\n  }\n\n  body {\n    background-position: center top;\n    @media (max-width: 799px) {\n      background-image: none !important;    \n    }\n  }\n  \n`\n\nconst Wrap = styled.div`\n  font-family: 'Roboto', sans-serif;\n`\n\nconst NotesBar = styled.div`\n  background-color: #fff;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  \n  @media (min-width: 800px) {\n    min-height: auto;\n    position: fixed;\n    bottom: 0;\n    right: 30px;\n    \n    border-color: ${({theme})=>theme.highlight};\n    border-style: solid;\n    border-width: 3px;\n    border-bottom: 0;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    box-shadow: 0 1px 4px rgba(0, 0, 0, .3);\n    height: 31px;\n    width: 180px;\n      &.open {\n        height: 400px;\n        width: 450px;\n      }\n  } \n`\n\nconst StyledUserStatus = styled(UserStatus)`\n  bottom: 0;\n  right: 0;\n`\n\nconst NotesHeader = styled.div`\n  background-color: ${({theme})=>theme.highlight};\n  font-family: 'Roboto Condensed', sans-serif;\n  color: white;\n  padding: 5px 10px 5px;\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n`\n\nconst NoteContainer = styled.div`\n  flex-grow: 1;\n  flex-shrink: 1;\n`\n\nconst App = () => {\n  const [open, setOpen] = React.useState(true)\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Provider store={store}>\n        <ConnectedRouter history={history}>\n            <Wrap>\n              <GlobalStyle/>\n              <ForceAuth>\n                <NotesBar className={open ? 'open' : ''}>\n                  <NotesHeader onClick={()=>setOpen(!open)}>Road to Redemption<FontAwesomeIcon icon={open ? faAngleDoubleDown: faAngleDoubleUp} /></NotesHeader>\n                  <UserBar/>\n                    <NoteContainer>\n                        <Route exact={true} path={`${process.env.PUBLIC_URL}/`} component={Home} />\n                        <Route path={`${process.env.PUBLIC_URL}/p/:pageId`} component={Page} />\n                    </NoteContainer>\n                  <StyledUserStatus/>\n                </NotesBar>\n              </ForceAuth>\n            </Wrap>\n        </ConnectedRouter>\n      </Provider>\n    </ThemeProvider>\n  )\n};\n\nconst Home = ({ match }) => <EditableDiv name=\"home\"/>\n\nconst Page = ({ match }) => <EditableDiv name={match.params.pageId}/>;\n\nconst rootElement = document.getElementById(\"root\");\nrender(<App />, rootElement);\n","/**\n * Combine all reducers in this file and export the combined reducers.\n */\n\nimport { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\n\nimport history from '../utils/history';\nimport auth from '../auth/reducer'\nimport notes from '../notes/reducer'\nimport userStatus from '../user-status/reducer'\n\n/**\n * Merges the main reducer with the router state and dynamically injected reducers\n */\nexport default function createReducer(injectedReducers = {}) {\n  const rootReducer = combineReducers({\n    router: connectRouter(history),\n    auth,\n    notes,\n    userStatus,\n    ...injectedReducers,\n  });\n\n  return rootReducer;\n}","import * as types from \"./action-types\";\n\nexport function setUser(user: object) {\n    return {\n        type: types.SET_USER,\n        payload: {\n            user,\n        }\n    }\n}"],"sourceRoot":""}